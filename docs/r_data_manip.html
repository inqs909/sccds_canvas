<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Cleaning in R – SCCDS Canvas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-85d6ed6ef93f7b75ae44cb4d7fc8909c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Cleaning in R</h1>
</div>



<div class="quarto-title-meta">

    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">September 28, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<p><em>Modifiend from <a href="https://www.inqs.info/stat_comp/">Statistical Computing</a></em></p>
<p>Data manipulation consists of transforming a data set to be analyzed. Certain statistical methods require data sets to be formatted in a certain way before you can apply a certain function<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Other times, you will need to transform the data set to present to stakeholder. Therefore, being able to transform a data set is essential.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warnings Suppressed
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>In order to keep the page concise, the warning messages have been suppressed. These warnings were produced because functions were applied to incorrect inputs, ie <span class="math inline">\(\sqrt{A}\)</span>. Therefore, you may see <code>NA</code> as the output. There is nothing wrong with the code, it is just that the input was not valid, but R still completed the task.</p>
</div>
</div>
</div>
<section id="tidyverse" class="level2">
<h2 class="anchored" data-anchor-id="tidyverse">Tidyverse</h2>
<p>Tidyverse is a set of packages that make data manipulation much easier. These are functions that many individuals from the R community find useful to use for data analysis. Many of the functions are descriptively named for easy remembrance. If you haven’t done so, install tidyverse:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then load tidyverse into R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will load the main Tidyverse packages: <code>ggplot2</code>, <code>tibble</code>, <code>tidyr</code>, <code>readr</code>, <code>purr</code>, <code>dplyr</code>, <code>stringr</code>, and <code>forcats</code>.</p>
</section>
<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading Data</h2>
<p>There are three methods to load a data set in R: using base R, using Tidyverse, or using RStudio. While it is important to understand how the code works to load a data set, I recommend using RStudio to import the data. It does all the work for you. Additionally, if you decide to use Tidyverse packages, RStudio will provide corresponding code for a particular file.</p>
<p>To import a data set using RStudio, head over to the environment tab (usually in the upper right hand pane) and click on the Import Dataset button. A pop-up window should look something like below.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="img/import.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>Notice how there are several options to load a data set. Depending on the format, you may want to choose one of those options. Next, notice how there are 2 “From Text”. This is because it will load text data using either Base R packages or the <code>readr</code> package from tidyverse. Either works, but the <code>readr</code> package provides the necessary code to load the data set in the window. The other one provides the code in the console.</p>
<section id="csv-files" class="level3">
<h3 class="anchored" data-anchor-id="csv-files">CSV Files</h3>
<p>A CSV file is a type of text file that where the values are separated from commas. It is very common file that you will work with. Here I will provide the code necessary to import a CSV file using either Base R or <code>readr</code> package code.</p>
<section id="base-r" class="level4">
<h4 class="anchored" data-anchor-id="base-r">Base R</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.csv</span>(<span class="st">"FILE_NAME_AND_LOCATION"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="readr-package" class="level4">
<h4 class="anchored" data-anchor-id="readr-package"><code>readr</code> package</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"FILE_NAME_AND_LOCATION"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice that the functions are virtually the same.</p>
</section>
</section>
<section id="for-this-page" class="level3">
<h3 class="anchored" data-anchor-id="for-this-page">For This Page</h3>
<p>You will need to download and extract this zip <a href="https://www.inqs.info/stat_comp/files/data.zip">file</a> to conduct the analysis in the chapter. The code below will load the data sets you need:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_1.csv"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>data2 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_2.csv"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>data3 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_3.csv"</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>data4 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_6.csv"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>data5 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_7.csv"</span>)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>data6 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_5.csv"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>data7 <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/data_3_4.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Make sure to change the file location as needed.</p>
</section>
</section>
<section id="the-pipe-operator" class="level2">
<h2 class="anchored" data-anchor-id="the-pipe-operator">The Pipe Operator <code>|&gt;</code></h2>
<p>The main benefit of the pipe operator is to make the code easier to read. The base pipe <code>|&gt;</code> was added in R 4.0. What the pipe operator, <code>|&gt;</code>, does is that it will take the output from a previous function and it will use it as the input for the next function. This prevents us from nesting functions together and overwhelm us with numerous parentheses and commas. To practice, pipe <code>data</code> into the <code>glimpse()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 1,000
#&gt; Columns: 10
#&gt; $ ID1  &lt;chr&gt; "A2b6115fd", "Ac51c9cf1", "A7534d3a0", "A73fc5642", "Ae020e4bd", …
#&gt; $ cat1 &lt;chr&gt; "A", "A", "A", "A", "C", "A", "A", "C", "B", "C", "B", "B", "A", …
#&gt; $ cat2 &lt;chr&gt; "E", "D", "F", "F", "E", "D", "E", "F", "E", "E", "F", "E", "E", …
#&gt; $ var1 &lt;dbl&gt; 1.1541672, -0.3667030, -0.4203357, -2.0006336, 0.6970417, 0.46690…
#&gt; $ var2 &lt;dbl&gt; 4, 3, 6, 5, 3, 4, 5, 0, 5, 3, 3, 8, 4, 5, 2, 5, 7, 7, 5, 1, 4, 3,…
#&gt; $ var3 &lt;dbl&gt; 2.87981553, 0.06397162, -1.04021753, -0.31355281, 0.52613439, 2.4…
#&gt; $ var4 &lt;dbl&gt; 3.53845785, 1.07279559, 0.22632480, 0.02128418, 2.97936180, 1.853…
#&gt; $ var5 &lt;dbl&gt; -3.1827969, -3.1827969, -3.1827969, -3.1827969, 6.0601967, -3.182…
#&gt; $ var6 &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
#&gt; $ var7 &lt;dbl&gt; 1, 0, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1,…</code></pre>
</div>
</div>
<p>The <code>glimpse()</code> provides basic variable information about <code>data1</code>. I recommend practice reading the code in plain English to help you understand how these functions.</p>
</section>
<section id="data-transformation" class="level2">
<h2 class="anchored" data-anchor-id="data-transformation">Data Transformation</h2>
<p>This section focuses on manipulating the data to obtain basic statistics, such as obtaining the mean for different categories. Many of the functions used here are from the <code>dplyr</code> package.</p>
<section id="summarizing-data" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-data">Summarizing Data</h3>
<p>Summarizing Data is one of the most important thing in statistics. First, let’s get the mean for all the variables in <code>data1</code>. This is done by using the <code>summarize_all()</code>. All you need to do is provide the function you want R to provide. Pipe <code>data1</code> into the <code>summarize_all()</code> and specify <code>mean</code> in the function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">summarise_all</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 10
#&gt;     ID1  cat1  cat2    var1  var2  var3  var4  var5  var6  var7
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1    NA    NA    NA -0.0335  4.94 0.936  1.96 0.774     0 0.394</code></pre>
</div>
</div>
<p>Notice how some values are <code>NA</code>, this is because the variables are character data types. Therefore, it will not be able to compute the mean. Now find the standard deviation for the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">summarise_all</span>(sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 10
#&gt;     ID1  cat1  cat2  var1  var2  var3  var4  var5  var6  var7
#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1    NA    NA    NA  1.00  2.22  1.02  1.00  3.93     0 0.489</code></pre>
</div>
</div>
<p>Now lets create a frequency table for the <code>cat1</code> variable in <code>data1</code>. use the <code>count()</code> and specify the variable you are interested in:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">count</span>(cat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 2
#&gt;   cat1      n
#&gt;   &lt;chr&gt; &lt;int&gt;
#&gt; 1 A       332
#&gt; 2 B       328
#&gt; 3 C       340</code></pre>
</div>
</div>
<p>Now, repeat for <code>cat2</code> in <code>data1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">count</span>(cat2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 2
#&gt;   cat2      n
#&gt;   &lt;chr&gt; &lt;int&gt;
#&gt; 1 D       322
#&gt; 2 E       337
#&gt; 3 F       341</code></pre>
</div>
</div>
</section>
<section id="grouping" class="level3">
<h3 class="anchored" data-anchor-id="grouping">Grouping</h3>
<p>Summarizing data is great, but sometimes you may want to group data and obtain summary statistics for those groups. This is done by using the <code>group_by()</code> and specify which variable you want to group. Try grouping <code>data1</code> by <code>cat1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(cat1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 10
#&gt; # Groups:   cat1 [3]
#&gt;    ID1       cat1  cat2    var1  var2    var3   var4   var5  var6  var7
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 A2b6115fd A     E      1.15      4  2.88   3.54   -3.18      0     1
#&gt;  2 Ac51c9cf1 A     D     -0.367     3  0.0640 1.07   -3.18      0     0
#&gt;  3 A7534d3a0 A     F     -0.420     6 -1.04   0.226  -3.18      0     0
#&gt;  4 A73fc5642 A     F     -2.00      5 -0.314  0.0213 -3.18      0     0
#&gt;  5 Ae020e4bd C     E      0.697     3  0.526  2.98    6.06      0     0
#&gt;  6 Ac0d3b0fe A     D      0.467     4  2.45   1.85   -3.18      0     0
#&gt;  7 A2edfed41 A     E      1.36      5  0.514  0.529  -3.18      0     1
#&gt;  8 Ad38a4bbe C     F      0.369     0  1.98   2.36    6.06      0     1
#&gt;  9 A5ee0f97f B     E      1.80      5  0.147  2.22   -0.701     0     0
#&gt; 10 Ad791c03d C     E      1.25      3 -1.05   0.0289  6.06      0     1
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
<p>Great! You now have grouped data; however, this is not helpful (note everything looks the same). We can use this output and summarize the groups. All we need to do is pipe the output to the <code>summarise_all()</code>. Group <code>data1</code> by <code>cat1</code> and find the mean:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(cat1) <span class="sc">|&gt;</span> <span class="fu">summarise_all</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 10
#&gt;   cat1    ID1  cat2    var1  var2  var3  var4   var5  var6  var7
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 A        NA    NA -0.0369  4.79 0.877  1.97 -3.18      0 0.401
#&gt; 2 B        NA    NA -0.0345  4.98 1.01   1.97 -0.701     0 0.390
#&gt; 3 C        NA    NA -0.0292  5.05 0.922  1.94  6.06      0 0.391</code></pre>
</div>
</div>
<p>If we want to group by two variables, all we need to do is specify both variables in the <code>group_by()</code>. Group <code>data1</code> by <code>cat1</code> and <code>cat2</code> then find the mean:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(cat1,cat2) <span class="sc">|&gt;</span> <span class="fu">summarise_all</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 9 × 10
#&gt; # Groups:   cat1 [3]
#&gt;   cat1  cat2    ID1      var1  var2  var3  var4   var5  var6  var7
#&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 A     D        NA -0.0186    4.87 0.858  1.93 -3.18      0 0.374
#&gt; 2 A     E        NA -0.0265    4.70 0.882  1.94 -3.18      0 0.393
#&gt; 3 A     F        NA -0.0661    4.79 0.890  2.03 -3.18      0 0.436
#&gt; 4 B     D        NA -0.152     5.21 1.01   1.96 -0.701     0 0.333
#&gt; 5 B     E        NA  0.0890    5.04 1.04   1.94 -0.701     0 0.417
#&gt; 6 B     F        NA -0.0659    4.72 0.979  2.03 -0.701     0 0.411
#&gt; 7 C     D        NA -0.160     5.01 0.927  1.87  6.06      0 0.378
#&gt; 8 C     E        NA -0.000228  5.07 0.910  2.00  6.06      0 0.345
#&gt; 9 C     F        NA  0.0662    5.07 0.930  1.94  6.06      0 0.445</code></pre>
</div>
</div>
<p>Now, instead of finding the mean for all variables in a data set, we are only interested in viewing <code>var1</code>. We can use the <code>summarise()</code> and type the R code for finding the mean for the particular variable. Group <code>data1</code> by <code>cat1</code> and find the mean for <code>var1</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(cat1) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(<span class="fu">mean</span>(var1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 2
#&gt;   cat1  `mean(var1)`
#&gt;   &lt;chr&gt;        &lt;dbl&gt;
#&gt; 1 A          -0.0369
#&gt; 2 B          -0.0345
#&gt; 3 C          -0.0292</code></pre>
</div>
</div>
</section>
<section id="subsets" class="level3">
<h3 class="anchored" data-anchor-id="subsets">Subsets</h3>
<p>On occasion, you may need to create a subset of your data. You may only want to work with one part of your data. To create a subset of your data, use the <code>filter()</code> to create the subset. This will select the rows that satisfy a certain condition. Create a subset of <code>data1</code> where only the positive values of <code>var1</code> are present. Use the <code>filter()</code> and state <code>var1&gt;0</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(var1<span class="sc">&gt;</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 484 × 10
#&gt;    ID1       cat1  cat2   var1  var2    var3   var4   var5  var6  var7
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 A2b6115fd A     E     1.15      4  2.88   3.54   -3.18      0     1
#&gt;  2 Ae020e4bd C     E     0.697     3  0.526  2.98    6.06      0     0
#&gt;  3 Ac0d3b0fe A     D     0.467     4  2.45   1.85   -3.18      0     0
#&gt;  4 A2edfed41 A     E     1.36      5  0.514  0.529  -3.18      0     1
#&gt;  5 Ad38a4bbe C     F     0.369     0  1.98   2.36    6.06      0     1
#&gt;  6 A5ee0f97f B     E     1.80      5  0.147  2.22   -0.701     0     0
#&gt;  7 Ad791c03d C     E     1.25      3 -1.05   0.0289  6.06      0     1
#&gt;  8 Af88d3ab5 B     E     2.10      8  3.07   3.29   -0.701     0     1
#&gt;  9 A429b65a6 A     E     1.46      4  0.0638 2.36   -3.18      0     0
#&gt; 10 A3638155a A     F     0.429     5  1.76   1.55   -3.18      0     1
#&gt; # ℹ 474 more rows</code></pre>
</div>
</div>
<p>If you know which rows you want, you can use the <code>slice()</code> and specify the rows as a vector. Create a subset of <code>data1</code> and select the rows 100 to 200 and 300 to 400.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">100</span><span class="sc">:</span><span class="dv">200</span>, <span class="dv">300</span><span class="sc">:</span><span class="dv">400</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 202 × 10
#&gt;    ID1       cat1  cat2    var1  var2   var3    var4   var5  var6  var7
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 A568e9a48 A     E      1.88      6  2.59  4.02    -3.18      0     1
#&gt;  2 Aa77dca83 B     D      1.32      5  0.889 3.12    -0.701     0     1
#&gt;  3 A901d56c2 C     F     -0.406     6  0.496 3.67     6.06      0     0
#&gt;  4 Ad66ce513 A     D      1.04      2  0.331 0.00523 -3.18      0     0
#&gt;  5 A897a230d B     E     -0.616     9  1.61  3.08    -0.701     0     0
#&gt;  6 Afbc693a4 B     F     -0.404     7 -0.604 0.149   -0.701     0     1
#&gt;  7 Ae7269323 C     F     -0.176     4  1.06  2.26     6.06      0     0
#&gt;  8 A182729af A     D      1.11      7 -0.297 1.45    -3.18      0     1
#&gt;  9 A1a06950b C     E     -1.29      5  1.78  3.07     6.06      0     1
#&gt; 10 A569c9d81 A     F      1.28      6  0.683 1.53    -3.18      0     0
#&gt; # ℹ 192 more rows</code></pre>
</div>
</div>
<p>If you need random sample of your <code>data1</code>, use the <code>slice_sample(n = N)</code> and specify the number you want. It will create a data set of randomly selected rows. Create a random sample of <code>data1</code> of 100 rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 100 × 10
#&gt;    ID1       cat1  cat2      var1  var2   var3   var4   var5  var6  var7
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 C6e968b78 C     F      0.824       6  0.942  2.97   6.06      0     1
#&gt;  2 D568e9a48 C     D     -0.360       4  0.397  2.95   6.06      0     0
#&gt;  3 A02dec5e1 B     E     -2.07        4  1.34   3.06  -0.701     0     0
#&gt;  4 B6ae5b4c9 B     F      0.00758     8 -1.34  -0.274 -0.701     0     0
#&gt;  5 A57391f84 C     E     -0.114       7  1.62   2.08   6.06      0     0
#&gt;  6 B59e7d00c C     E     -0.466       3  0.887  2.27   6.06      0     0
#&gt;  7 C2a8d1b6b A     E     -0.609      10  1.33   2.61  -3.18      0     0
#&gt;  8 C81c29d00 A     F     -0.652       9  0.875  2.13  -3.18      0     0
#&gt;  9 Ad138cffd C     F     -0.654       3  1.59   2.16   6.06      0     0
#&gt; 10 A177b3f3c C     D     -0.192       0  3.16   2.91   6.06      0     0
#&gt; # ℹ 90 more rows</code></pre>
</div>
</div>
<p>If you want a random sample that is proportion of your original data size, use the <code>slice_sample(prop = X)</code>. Specify the proportion that you want from the data. Create a random sample of <code>data1</code> that is only 2/7th of the original size.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>data1 <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="dv">2</span><span class="sc">/</span><span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 285 × 10
#&gt;    ID1       cat1  cat2    var1  var2   var3  var4   var5  var6  var7
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 C921061e3 B     E      2.43      5 -1.04  0.478 -0.701     0     0
#&gt;  2 A21b702c9 B     D     -0.387    13  2.25  3.63  -0.701     0     0
#&gt;  3 C87a5811d A     E      1.74      3  1.24  3.16  -3.18      0     1
#&gt;  4 B3e115ac3 B     D     -2.20      5 -0.362 0.255 -0.701     0     0
#&gt;  5 Dcd6ee546 B     F      0.368     3  1.57  4.03  -0.701     0     0
#&gt;  6 Bc3922a23 A     D     -0.800     6  0.178 1.86  -3.18      0     0
#&gt;  7 A8e19476a B     E     -1.25      3  3.54  3.51  -0.701     0     0
#&gt;  8 Cd6103fdb A     D     -1.31      2  0.514 1.81  -3.18      0     0
#&gt;  9 B22573984 A     E     -1.52      4  0.556 0.890 -3.18      0     0
#&gt; 10 A9ce4930a B     D     -0.145     2  1.50  1.26  -0.701     0     1
#&gt; # ℹ 275 more rows</code></pre>
</div>
</div>
</section>
<section id="creating-variables" class="level3">
<h3 class="anchored" data-anchor-id="creating-variables">Creating Variables</h3>
<p>Some times you may need to transform variables to a new variable. This can be done by using the <code>mutate()</code> where you specify the name of the new variable and set equal to the transformation of other variables. Using the <code>data2</code> data set, create a new variable called <code>logvar1</code> and set that to the log of <code>va1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">logvar1 =</span> <span class="fu">log</span>(va1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 6
#&gt;    ID1       ID_1     ID_2      va1    va2 logvar1
#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
#&gt;  1 A2b6115fd 2b6115fd A     0.458   81.4    -0.782
#&gt;  2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15   -1.44 
#&gt;  3 A7534d3a0 7534d3a0 A     0.254    1.16   -1.37 
#&gt;  4 A73fc5642 73fc5642 A     0.0411  -1.21   -3.19 
#&gt;  5 Ae020e4bd e020e4bd A     0.266   -2.31   -1.32 
#&gt;  6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882  -4.61 
#&gt;  7 A2edfed41 2edfed41 A     0.293   -0.375  -1.23 
#&gt;  8 Ad38a4bbe d38a4bbe A     0.261   -1.09   -1.34 
#&gt;  9 A5ee0f97f 5ee0f97f A     0.186   -6.14   -1.68 
#&gt; 10 Ad791c03d d791c03d A     0.0368  -0.258  -3.30 
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
<p>The <code>mutate()</code> allows you to create multiple new variables at once. Id addition to <code>logvar1</code>, create a new variable called <code>sqrtvar2</code> and set that equal to the square root of <code>va2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">logvar1 =</span> <span class="fu">log</span>(va1), </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">sqrtvar2 =</span> <span class="fu">sqrt</span>(va2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 7
#&gt;    ID1       ID_1     ID_2      va1    va2 logvar1 sqrtvar2
#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
#&gt;  1 A2b6115fd 2b6115fd A     0.458   81.4    -0.782     9.02
#&gt;  2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15   -1.44    NaN   
#&gt;  3 A7534d3a0 7534d3a0 A     0.254    1.16   -1.37      1.08
#&gt;  4 A73fc5642 73fc5642 A     0.0411  -1.21   -3.19    NaN   
#&gt;  5 Ae020e4bd e020e4bd A     0.266   -2.31   -1.32    NaN   
#&gt;  6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882  -4.61    NaN   
#&gt;  7 A2edfed41 2edfed41 A     0.293   -0.375  -1.23    NaN   
#&gt;  8 Ad38a4bbe d38a4bbe A     0.261   -1.09   -1.34    NaN   
#&gt;  9 A5ee0f97f 5ee0f97f A     0.186   -6.14   -1.68    NaN   
#&gt; 10 Ad791c03d d791c03d A     0.0368  -0.258  -3.30    NaN   
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
<p>If you want to create categorical variables, use the <code>mutate()</code> and the <code>if_else()</code>. The <code>if_else()</code> requires three arguments: <code>condition</code> argument, <code>true</code> argument, and <code>false</code> argument. The first argument requires a condition that will return a logical value. If true, then R will assign what is stated in the <code>true</code> argument, otherwise R will assign what is in the <code>false</code> argument. To begin, find the median of <code>va1</code> from <code>data2</code> and assign it to <code>medval</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>medval <span class="ot">&lt;-</span> data2<span class="sc">$</span>va1 <span class="sc">|&gt;</span> <span class="fu">median</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>No create a new variable called <code>diva1</code> where if <code>va1</code> is greater than the median of <code>va1</code>, assign it “A”, otherwise assign it “B”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>data2 <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">diva1=</span><span class="fu">if_else</span>(va1<span class="sc">&gt;</span>medval,<span class="st">"A"</span>,<span class="st">"B"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 6
#&gt;    ID1       ID_1     ID_2      va1    va2 diva1
#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;
#&gt;  1 A2b6115fd 2b6115fd A     0.458   81.4   A    
#&gt;  2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15  B    
#&gt;  3 A7534d3a0 7534d3a0 A     0.254    1.16  B    
#&gt;  4 A73fc5642 73fc5642 A     0.0411  -1.21  B    
#&gt;  5 Ae020e4bd e020e4bd A     0.266   -2.31  B    
#&gt;  6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882 B    
#&gt;  7 A2edfed41 2edfed41 A     0.293   -0.375 A    
#&gt;  8 Ad38a4bbe d38a4bbe A     0.261   -1.09  B    
#&gt;  9 A5ee0f97f 5ee0f97f A     0.186   -6.14  B    
#&gt; 10 Ad791c03d d791c03d A     0.0368  -0.258 B    
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
</section>
<section id="merging-datasets" class="level3">
<h3 class="anchored" data-anchor-id="merging-datasets">Merging Datasets</h3>
<p>One of the last thing is to go over how to merge data sets together. To merge the data sets, we use the <code>full_join()</code>. The <code>full_join()</code> needs two data sets (separated by commas) and the <code>by</code> argument which provides the variables needed (must be the same name for each data set) to merge the data sets. Merge <code>data1</code> and <code>data2</code> with the variable <code>ID1</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(data1, data2, <span class="at">by =</span> <span class="st">"ID1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 14
#&gt;    ID1    cat1  cat2    var1  var2    var3   var4   var5  var6  var7 ID_1  ID_2 
#&gt;    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
#&gt;  1 A2b61… A     E      1.15      4  2.88   3.54   -3.18      0     1 2b61… A    
#&gt;  2 Ac51c… A     D     -0.367     3  0.0640 1.07   -3.18      0     0 c51c… A    
#&gt;  3 A7534… A     F     -0.420     6 -1.04   0.226  -3.18      0     0 7534… A    
#&gt;  4 A73fc… A     F     -2.00      5 -0.314  0.0213 -3.18      0     0 73fc… A    
#&gt;  5 Ae020… C     E      0.697     3  0.526  2.98    6.06      0     0 e020… A    
#&gt;  6 Ac0d3… A     D      0.467     4  2.45   1.85   -3.18      0     0 c0d3… A    
#&gt;  7 A2edf… A     E      1.36      5  0.514  0.529  -3.18      0     1 2edf… A    
#&gt;  8 Ad38a… C     F      0.369     0  1.98   2.36    6.06      0     1 d38a… A    
#&gt;  9 A5ee0… B     E      1.80      5  0.147  2.22   -0.701     0     0 5ee0… A    
#&gt; 10 Ad791… C     E      1.25      3 -1.05   0.0289  6.06      0     1 d791… A    
#&gt; # ℹ 990 more rows
#&gt; # ℹ 2 more variables: va1 &lt;dbl&gt;, va2 &lt;dbl&gt;</code></pre>
</div>
</div>
<p>The <code>full_join()</code> allows you to merge data sets using two variables instead of one. All you need to do is specify <code>by</code> argument with a vector specifying the arguments. Merge <code>data2</code> and <code>data3</code> by <code>ID_1</code> and <code>ID_2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">full_join</span>(data2, data3, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"ID_1"</span>,<span class="st">"ID_2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 8
#&gt;    ID1.x     ID_1     ID_2      va1    va2 ID1.y         v1     v2
#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
#&gt;  1 A2b6115fd 2b6115fd A     0.458   81.4   A2b6115fd 0.361  0.278 
#&gt;  2 Ac51c9cf1 c51c9cf1 A     0.236   -1.15  Ac51c9cf1 0.273  2.64  
#&gt;  3 A7534d3a0 7534d3a0 A     0.254    1.16  A7534d3a0 1.17   0.119 
#&gt;  4 A73fc5642 73fc5642 A     0.0411  -1.21  A73fc5642 0.879  0.705 
#&gt;  5 Ae020e4bd e020e4bd A     0.266   -2.31  Ae020e4bd 0.0268 0.297 
#&gt;  6 Ac0d3b0fe c0d3b0fe A     0.00992 -0.882 Ac0d3b0fe 1.18   3.16  
#&gt;  7 A2edfed41 2edfed41 A     0.293   -0.375 A2edfed41 0.356  0.174 
#&gt;  8 Ad38a4bbe d38a4bbe A     0.261   -1.09  Ad38a4bbe 0.430  0.130 
#&gt;  9 A5ee0f97f 5ee0f97f A     0.186   -6.14  A5ee0f97f 0.643  0.0231
#&gt; 10 Ad791c03d d791c03d A     0.0368  -0.258 Ad791c03d 0.183  0.311 
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="reshaping-data" class="level2">
<h2 class="anchored" data-anchor-id="reshaping-data">Reshaping Data</h2>
<p>This section focuses on reshaping the data to prepare it for analysis. For example, to conduct longitudinal data analysis, you will need to have long data. Reshaping data may be with converting data from wide to long, converting back from long to wide, splitting variables, splitting rows and merging variable. The functions used in this lesson are from the <code>tidy</code> package</p>
<section id="wide-to-long-data" class="level3">
<h3 class="anchored" data-anchor-id="wide-to-long-data">Wide to Long Data</h3>
<p>Converting data from wide to long is necessary when the data looks like <code>data4</code>, view <code>data4</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>data4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 5
#&gt;    ID1           X1     X2    X3    X4
#&gt;    &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 Ad9131ee9  0.800  4.68   1.46  5.35
#&gt;  2 A9c5988ea  1.17   1.50   4.83  3.75
#&gt;  3 A28a5479d  1.85   2.64   2.39  4.34
#&gt;  4 Aaf5537cc  1.55   2.28   3.35  3.76
#&gt;  5 A370958bd -1.36   2.48   2.06  4.70
#&gt;  6 Aea997e13  2.37   3.27   3.11  3.31
#&gt;  7 A3563646f  2.10  -0.902  2.49  2.75
#&gt;  8 A9b3cfdba -0.513  0.271  2.97  2.97
#&gt;  9 A32b6737a  1.28   2.02   3.48  4.87
#&gt; 10 A30e96748  1.30   1.72   2.11  2.04
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
<p>Let’s say <code>data4</code> represents biomarker data. Variable <code>ID1</code> represents a unique identifier for the participant. Then <code>X1</code>, <code>X2</code>, <code>X3</code>, and <code>X4</code> represents a value collected for a participant at different time point. This is know as repeated measurements. This data is considered wide because the repeated measurements are on the same row. To make it long, the repeated measurements must be on the same column.</p>
<p>To convert data from long to wide, we will use the <code>pivot_longer()</code> with the first argument taking variables of the repeated measurements, <code>c(X1:X4)</code> or <code>X1:X4</code>, second you will need to specify the <code>names_to</code> argument which specifies the variable name to store the long variables, lastly you will need to specify the <code>values_to</code> argument that specifies variable to store the values in the long data set. Convert the <code>data4</code> to long and name the variable names column <code>"measurement"</code>, and values column <code>"value"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>data4 <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(X1<span class="sc">:</span>X4, </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">"measurement"</span>, </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_to =</span> <span class="st">"value"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4,000 × 3
#&gt;    ID1       measurement value
#&gt;    &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;
#&gt;  1 Ad9131ee9 X1          0.800
#&gt;  2 Ad9131ee9 X2          4.68 
#&gt;  3 Ad9131ee9 X3          1.46 
#&gt;  4 Ad9131ee9 X4          5.35 
#&gt;  5 A9c5988ea X1          1.17 
#&gt;  6 A9c5988ea X2          1.50 
#&gt;  7 A9c5988ea X3          4.83 
#&gt;  8 A9c5988ea X4          3.75 
#&gt;  9 A28a5479d X1          1.85 
#&gt; 10 A28a5479d X2          2.64 
#&gt; # ℹ 3,990 more rows</code></pre>
</div>
</div>
</section>
<section id="long-to-wide" class="level3">
<h3 class="anchored" data-anchor-id="long-to-wide">Long to Wide</h3>
<p>If you need to convert data from long to wide, use the <code>pivot_wider()</code>. You will need to specify the <code>names_from</code> argument which specifies the variable names for the wide data set, and you will need to specify the <code>values_from</code> argument that specifies variable that contains the values in the long data set. Convert <code>data5</code> from long to wide data. Note, you must specify the arguments for this function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>data5 <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> measurement, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">values_from =</span> value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 5
#&gt;    ID1           X1     X2    X3    X4
#&gt;    &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 Ad9131ee9  0.800  4.68   1.46  5.35
#&gt;  2 A9c5988ea  1.17   1.50   4.83  3.75
#&gt;  3 A28a5479d  1.85   2.64   2.39  4.34
#&gt;  4 Aaf5537cc  1.55   2.28   3.35  3.76
#&gt;  5 A370958bd -1.36   2.48   2.06  4.70
#&gt;  6 Aea997e13  2.37   3.27   3.11  3.31
#&gt;  7 A3563646f  2.10  -0.902  2.49  2.75
#&gt;  8 A9b3cfdba -0.513  0.271  2.97  2.97
#&gt;  9 A32b6737a  1.28   2.02   3.48  4.87
#&gt; 10 A30e96748  1.30   1.72   2.11  2.04
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
</section>
<section id="spliting-variables" class="level3">
<h3 class="anchored" data-anchor-id="spliting-variables">Spliting Variables</h3>
<p>Before we begin, look at <code>data6</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>data6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 4
#&gt;    ID1       merge         X3    X4
#&gt;    &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 Ad9131ee9 -1.23/2.64  2.12  3.56
#&gt;  2 A9c5988ea 1.74/3.02   4.09  4.88
#&gt;  3 A28a5479d 0.87/3.56   3.47  4.47
#&gt;  4 Aaf5537cc 1.05/2.01   3.61  5.03
#&gt;  5 A370958bd -1.47/1.26  3.98  6.59
#&gt;  6 Aea997e13 1.66/3.51   1.65  2.72
#&gt;  7 A3563646f 1.81/1.7    4.29  3.13
#&gt;  8 A9b3cfdba 1.8/2.26    1.94  5.23
#&gt;  9 A32b6737a 2.38/1.68   3.06  3.3 
#&gt; 10 A30e96748 1/2.17      2.59  3.03
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
<p>Notice how the <code>merge</code> variable has two values separated by “/”. If we need to split the variable into two variables, we need to specify the <code>separate()</code>. All you need to specify is the variable you need to split, the name of the 2 new variables, in a character vector, and how to split the variable <code>"/"</code>. Split the variable <code>merge</code> in <code>data6</code> to two new variables called <code>X1</code> and <code>X2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>data6 <span class="sc">|&gt;</span> <span class="fu">separate</span>(merge, <span class="fu">c</span>(<span class="st">"X1"</span>, <span class="st">"X2"</span>), <span class="st">"/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 5
#&gt;    ID1       X1    X2       X3    X4
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 Ad9131ee9 -1.23 2.64   2.12  3.56
#&gt;  2 A9c5988ea 1.74  3.02   4.09  4.88
#&gt;  3 A28a5479d 0.87  3.56   3.47  4.47
#&gt;  4 Aaf5537cc 1.05  2.01   3.61  5.03
#&gt;  5 A370958bd -1.47 1.26   3.98  6.59
#&gt;  6 Aea997e13 1.66  3.51   1.65  2.72
#&gt;  7 A3563646f 1.81  1.7    4.29  3.13
#&gt;  8 A9b3cfdba 1.8   2.26   1.94  5.23
#&gt;  9 A32b6737a 2.38  1.68   3.06  3.3 
#&gt; 10 A30e96748 1     2.17   2.59  3.03
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
</section>
<section id="splitting-rows" class="level3">
<h3 class="anchored" data-anchor-id="splitting-rows">Splitting Rows</h3>
<p>The variable <code>merge</code> in <code>data6</code> was split into different variables before, now instead of variables, let’s split it into different rows instead. To do this, use the <code>separate_rows()</code>. All you need to specify the variable name and the <code>sep</code> argument (must state the argument). Split the <code>merge</code> variable from <code>data6</code> into different rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>data6 <span class="sc">|&gt;</span> <span class="fu">separate_rows</span>(merge, <span class="at">sep =</span> <span class="st">"/"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2,000 × 4
#&gt;    ID1       merge    X3    X4
#&gt;    &lt;chr&gt;     &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 Ad9131ee9 -1.23  2.12  3.56
#&gt;  2 Ad9131ee9 2.64   2.12  3.56
#&gt;  3 A9c5988ea 1.74   4.09  4.88
#&gt;  4 A9c5988ea 3.02   4.09  4.88
#&gt;  5 A28a5479d 0.87   3.47  4.47
#&gt;  6 A28a5479d 3.56   3.47  4.47
#&gt;  7 Aaf5537cc 1.05   3.61  5.03
#&gt;  8 Aaf5537cc 2.01   3.61  5.03
#&gt;  9 A370958bd -1.47  3.98  6.59
#&gt; 10 A370958bd 1.26   3.98  6.59
#&gt; # ℹ 1,990 more rows</code></pre>
</div>
</div>
</section>
<section id="merging-rows" class="level3">
<h3 class="anchored" data-anchor-id="merging-rows">Merging Rows</h3>
<p>If you need to merge variables together, similar to the <code>merge</code> variable, use the <code>unite()</code>. All you need to do is specify the variables to merge, the <code>col</code> argument which specifies the name of the new variable (as a character), and the <code>sep</code> argument which indicates the symbol for separate value, as a character. Note, you need to specify the bot the <code>col</code> argument and <code>sep</code> argument. Merge variable <code>X3</code> and <code>X4</code> in <code>data6</code> to a new variable called <code>merge2</code> and have the separator be a hyphen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>data6 <span class="sc">|&gt;</span> <span class="fu">unite</span>(X3, X4, <span class="at">col =</span> <span class="st">"merge2"</span>, <span class="at">sep=</span><span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 3
#&gt;    ID1       merge      merge2   
#&gt;    &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;    
#&gt;  1 Ad9131ee9 -1.23/2.64 2.12-3.56
#&gt;  2 A9c5988ea 1.74/3.02  4.09-4.88
#&gt;  3 A28a5479d 0.87/3.56  3.47-4.47
#&gt;  4 Aaf5537cc 1.05/2.01  3.61-5.03
#&gt;  5 A370958bd -1.47/1.26 3.98-6.59
#&gt;  6 Aea997e13 1.66/3.51  1.65-2.72
#&gt;  7 A3563646f 1.81/1.7   4.29-3.13
#&gt;  8 A9b3cfdba 1.8/2.26   1.94-5.23
#&gt;  9 A32b6737a 2.38/1.68  3.06-3.3 
#&gt; 10 A30e96748 1/2.17     2.59-3.03
#&gt; # ℹ 990 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="applied-example" class="level2">
<h2 class="anchored" data-anchor-id="applied-example">Applied Example</h2>
<p>Here is an applied example where you will use what you learned from the previous lesson and convert <code>data7</code> into <code>data8</code>. <code>data7</code> has a wide data format which contains time points labeled as <code>vX</code>, where <code>X</code> represents the time point number. At each time point, the mean, sd, and median was taken. You will need to convert the data to long where each row represents a new time point, and each row will have 3 variables representing the mean, sd, and median. View both <code>data7</code> and <code>data8</code> to have a better idea on what is going on. Remember you need to convert <code>data7</code> to <code>data8</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>data7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1,000 × 13
#&gt;    ID1     `v1/mean` `v1/sd` `v1/median` `v2/mean` `v2/sd` `v2/median` `v3/mean`
#&gt;    &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;
#&gt;  1 Ad9131…     3.11    2.86         4.50     1.93    3.21      3.27       2.65  
#&gt;  2 A9c598…     2.03    2.90         2.08     0.709   2.27      4.13       1.45  
#&gt;  3 A28a54…    -0.415   2.42         2.47     2.38   -0.820     1.22       3.44  
#&gt;  4 Aaf553…     1.25    2.24         3.71     4.00    0.456     4.32       1.54  
#&gt;  5 A37095…    -0.984   0.972        3.73     2.19   -0.184     2.14       4.32  
#&gt;  6 Aea997…     1.42    1.34         2.35     2.77    4.16     -0.00874   -3.02  
#&gt;  7 A35636…    -0.149   3.26         4.49     5.07    2.44      3.85       0.0388
#&gt;  8 A9b3cf…     0.270   1.57         3.25     2.89    0.422     5.01      -0.218 
#&gt;  9 A32b67…     0.714   3.39         5.66     2.52    3.15      3.16      -0.784 
#&gt; 10 A30e96…     0.467   2.47         2.64     3.97    1.76      4.00       2.21  
#&gt; # ℹ 990 more rows
#&gt; # ℹ 5 more variables: `v3/sd` &lt;dbl&gt;, `v3/median` &lt;dbl&gt;, `v4/mean` &lt;dbl&gt;,
#&gt; #   `v4/sd` &lt;dbl&gt;, `v4/median` &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>data8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4,000 × 5
#&gt;    ID1       time    mean     sd  median
#&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
#&gt;  1 Ad9131ee9 v1     3.11   2.86   4.50  
#&gt;  2 Ad9131ee9 v2     1.93   3.21   3.27  
#&gt;  3 Ad9131ee9 v3     2.65  -0.383  3.23  
#&gt;  4 Ad9131ee9 v4     0.605  0.883  4.65  
#&gt;  5 A9c5988ea v1     2.03   2.90   2.08  
#&gt;  6 A9c5988ea v2     0.709  2.27   4.13  
#&gt;  7 A9c5988ea v3     1.45   2.01   2.84  
#&gt;  8 A9c5988ea v4     0.710  3.03  -0.0898
#&gt;  9 A28a5479d v1    -0.415  2.42   2.47  
#&gt; 10 A28a5479d v2     2.38  -0.820  1.22  
#&gt; # ℹ 3,990 more rows</code></pre>
</div>
</div>
<p>Now that you viewed the data set, type the code to convert <code>data7</code> to <code>data8</code>. Try working it out before you look at the solution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>data7 <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="st">`</span><span class="at">v1/mean</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">v4/median</span><span class="st">`</span>,</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">"measurement"</span>,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">separate</span>(measurement, <span class="fu">c</span>(<span class="st">"time"</span>,<span class="st">"stat"</span>), <span class="at">sep=</span><span class="st">"/"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> stat, <span class="at">values_from =</span> value)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4,000 × 5
#&gt;    ID1       time    mean     sd  median
#&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
#&gt;  1 Ad9131ee9 v1     3.11   2.86   4.50  
#&gt;  2 Ad9131ee9 v2     1.93   3.21   3.27  
#&gt;  3 Ad9131ee9 v3     2.65  -0.383  3.23  
#&gt;  4 Ad9131ee9 v4     0.605  0.883  4.65  
#&gt;  5 A9c5988ea v1     2.03   2.90   2.08  
#&gt;  6 A9c5988ea v2     0.709  2.27   4.13  
#&gt;  7 A9c5988ea v3     1.45   2.01   2.84  
#&gt;  8 A9c5988ea v4     0.710  3.03  -0.0898
#&gt;  9 A28a5479d v1    -0.415  2.42   2.47  
#&gt; 10 A28a5479d v2     2.38  -0.820  1.22  
#&gt; # ℹ 3,990 more rows</code></pre>
</div>
</div>


<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Linear Mixed-Effects Models.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>